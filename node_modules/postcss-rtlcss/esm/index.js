import r from"postcss";import e from"rtlcss";var o,n,t=function(){return t=Object.assign||function(r){for(var e,o=1,n=arguments.length;o<n;o++)for(var t in e=arguments[o])Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r},t.apply(this,arguments)};function i(r,e,o){if(o||2===arguments.length)for(var n,t=0,i=e.length;t<i;t++)!n&&t in e||(n||(n=Array.prototype.slice.call(e,0,t)),n[t]=e[t]);return r.concat(n||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(r){r.combined="combined",r.override="override",r.diff="diff"}(o||(o={})),function(r){r.ltr="ltr",r.rtl="rtl"}(n||(n={}));var d,a,s="comment",l="decl",c="rule",u="atrule",f="string",p="boolean",v="function",m="keyframes",b="animation",g="animation-name",h=/rtl:/,y=/rtl:ignore/,R=/^\/\*!? *rtl:?(begin|end)?:(\w+):?([\s\S]*?) *\*\/$/,x=/(right|left)/i,k=/^(html)(?=\W|$)/,w=/(:root)(?=\W|$)/,E=/^(::view-transition(?:-(?:new|old|group|image-pair))?\()/,P=/[.?*+^$[\]\\(){}|-]/g,A=/\w$/;!function(r){r.IGNORE="ignore",r.URLS="urls",r.RULES="rules",r.SOURCE="source",r.RAW="raw"}(d||(d={})),function(r){r.BEGIN="begin",r.END="end"}(a||(a={}));var O=new RegExp("$-^"),S=[{name:"left-right",search:["left","Left","LEFT"],replace:["right","Right","RIGHT"]},{name:"ltr-rtl",search:["ltr","Ltr","LTR"],replace:["rtl","Rtl","RTL"]}],T=function(r){if(r.name)return r.name;var e=Array.isArray(r.search)?r.search[0]:r.search,o=Array.isArray(r.replace)?r.replace[0]:r.replace,n=/[^\w]/g,t=e.replace(n,"-"),i=o.replace(n,"_");return"".concat(t,"-").concat(i)},N=function(r){return r.map((function(r){return{name:T(r),priority:100,search:r.search,replace:r.replace,options:{scope:"url",ignoreCase:!1}}}))},j=Object.keys(o).map((function(r){return o[r]})),M=Object.keys(n).map((function(r){return n[r]})),L=function(r){return"string"!=typeof r&&!Array.isArray(r)||!!Array.isArray(r)&&r.some((function(r){return"string"!=typeof r}))},U=function(r,e){return"string"==typeof e?i(i([],r,!0),[e],!1):i(i([],r,!0),e,!0)},I=function(){return{mode:o.combined,ltrPrefix:'[dir="ltr"]',rtlPrefix:'[dir="rtl"]',bothPrefix:"[dir]",prefixSelectorTransformer:null,safeBothPrefix:!1,ignorePrefixedRules:!0,source:n.ltr,processUrls:!1,processRuleNames:!1,processKeyFrames:!1,processEnv:!0,useCalc:!1,stringMap:N(S),greedy:!1,aliases:{},plugins:[]}},C={options:t({},I()),keyframes:[],keyframesToRemove:[],keyframesStringMap:{},keyframesRegExp:O,rules:[],rulesToRemove:[],rulesPrefixRegExp:O,unmodifiedRules:[]},F=function(r){var e,o,n=t({},I());(r.mode&&j.includes(r.mode)&&(n.mode=r.mode),r.source&&M.includes(r.source)&&(n.source=r.source),typeof r.ignorePrefixedRules===p&&(n.ignorePrefixedRules=r.ignorePrefixedRules),typeof r.greedy===p&&(n.greedy=r.greedy),L(r.ltrPrefix)||(n.ltrPrefix=r.ltrPrefix),L(r.rtlPrefix)||(n.rtlPrefix=r.rtlPrefix),L(r.bothPrefix)||(n.bothPrefix=r.bothPrefix),typeof r.prefixSelectorTransformer===v&&(n.prefixSelectorTransformer=r.prefixSelectorTransformer),typeof r.safeBothPrefix===p&&(n.safeBothPrefix=r.safeBothPrefix),typeof r.processUrls===p&&(n.processUrls=r.processUrls),typeof r.processRuleNames===p&&(n.processRuleNames=r.processRuleNames),typeof r.processKeyFrames===p&&(n.processKeyFrames=r.processKeyFrames),typeof r.processEnv===p&&(n.processEnv=r.processEnv),typeof r.useCalc===p&&(n.useCalc=r.useCalc),function(r){return!Array.isArray(r)||r.some((function(r){return typeof r.search!=typeof r.replace||L(r.search)||L(r.replace)||Array.isArray(r.search)&&Array.isArray(r.replace)&&r.search.length!==r.replace.length}))}(r.stringMap))||N(r.stringMap).forEach((function(r){r.name===S[0].name?n.stringMap.splice(0,1,r):r.name===S[1].name?n.stringMap.splice(1,1,r):n.stringMap.push(r)}));return e=r.processDeclarationPlugins,Array.isArray(e)&&e.every((function(r){return typeof r.name==f&&"number"==typeof r.priority&&Array.isArray(r.processors)&&r.processors.every((function(r){return r.expr instanceof RegExp&&typeof r.action===v}))}))&&(n.plugins=r.processDeclarationPlugins.map((function(r){return t(t({},r),{directives:{control:{},value:[]}})}))),r.aliases&&(o=r.aliases,!Object.entries(o).some((function(r){return"string"!=typeof r[1]})))&&(n.aliases=r.aliases),n},G=function(r){C.options=F(r),C.keyframes=[],C.keyframesToRemove=[],C.keyframesStringMap={},C.keyframesRegExp=O,C.rules=[],C.rulesToRemove=[],C.rulesPrefixRegExp=function(r){var e=r.ltrPrefix,o=r.rtlPrefix,n=r.bothPrefix;if(!r.ignorePrefixedRules)return O;var t=[];return t=U(t,e),t=U(t,o),t=(t=U(t,n)).map((function(r){var e=r.replace(P,"\\$&");return A.test(r)?"".concat(e,"(?:\\W|$)"):e})),new RegExp("(".concat(t.join("|"),")"))}(C.options),C.unmodifiedRules=[]},$=function(){var r,e;C.keyframesStringMap=(r=C.keyframes,e={},r.forEach((function(r){e[r.atRuleParams]={name:r.atRule.params,nameFlipped:r.atRuleFlipped.params}})),e),C.keyframesRegExp=function(r){return new RegExp("(^|[^\\w-]| )(".concat(Object.keys(r).join("|"),")( |[^\\w-]|$)"),"g")}(C.keyframesStringMap)},B=Object.values(d),W=Object.values(a),K=function(r){var e=r.toString().match(R);if(e&&function(r){return B.includes("".concat(r[2]))&&(void 0===r[1]||W.includes("".concat(r[1])))}(e)){var o={directive:e[2]};return e[1]&&(o.block=e[1]),e[3]&&(o.option=e[3]),o}return null},D=function(r,e){return r.directive===d.IGNORE&&!r.block&&e[d.IGNORE]&&e[d.IGNORE].block===a.BEGIN},z=function(r,e){var o=r[e];if(o){var n=o.block;if(n!==a.BEGIN&&delete r[e],n!==a.END)return!0}return!1},H=function(r,e){var o=r[d.SOURCE],n=z(r,d.SOURCE);return o&&n?o.option:e||void 0},_=function(r,e,o,n){r.each((function(r){if(r.type===s||e.includes(r.type))if(r.type===s){var t=r,i=K(t);i&&o(t,i)}else n(r)}))},q=/^-\w+-/,J=function(r){return r.replace(q,"")},Q=function(r,e){if(C.options.prefixSelectorTransformer){var o=C.options.prefixSelectorTransformer(r,e);if(o&&typeof o===f)return o}return k.test(e)?e.replace(k,"$1".concat(r)):w.test(e)?e.replace(w,"".concat(r,"$1")):E.test(e)?e.replace(E,"".concat(r,"$1")):"".concat(r," ").concat(e)},V=function(r,e){r.selectors="string"==typeof e?r.selectors.map((function(r){return C.rulesPrefixRegExp.test(r)?r:Q(e,r)})):r.selectors.reduce((function(r,o){return r=C.rulesPrefixRegExp.test(o)?i(i([],r,!0),[o],!1):r.concat(e.map((function(r){return Q(r,o)})))}),[])},X=function(r){return!!r.nodes&&r.some((function(r){return r.type===l||r.type===c&&X(r)||r.type===u&&X(r)}))},Y=function(r,e,o){if(function(r){return r.some((function(r){return r.type===l}))}(e)){var n;for(o=i([],o,!0);o.length;){n=o.shift();var t=r.nodes.find((function(r){if(r.type===c&&r.selector===n.selector)return!0}));t?n=t:(n=n.clone().removeAll(),r.append(n)),r=n}r.append(e)}},Z=function(r,e,t,i,d){var a={rule:r,ruleLTR:e,ruleRTL:t,ruleBoth:i,ruleSafe:d};return C.options.mode!==o.diff&&function(r,e,t,i){var d=C.options,a=d.mode,s=d.ltrPrefix,l=d.rtlPrefix,c=d.bothPrefix,u=d.source;a===o.combined?(V(r,u===n.ltr?s:l),V(e,u===n.rtl?s:l)):(V(r,u===n.ltr?l:s),V(e,u===n.rtl?l:s)),V(t,c),V(i,c)}(e,t,i,d),C.rules.push(a),a},rr=function(r,e,o,n,t){var i=function(r){for(var e=[];r.type===c;)e.push(r),r=r.parent;return e.shift(),e.reverse()}(r),d=i.shift(),a=C.rules.find((function(r){return r.rule===d}));if(!a){var s=d.clone().removeAll(),l=s.clone(),u=s.clone(),f=s.clone();a=Z(d,s,l,u,f)}!function(r,e,o,n,t,i){Y(t.ruleLTR,r,i),Y(t.ruleRTL,e,i),Y(t.ruleBoth,o,i),Y(t.ruleSafe,n,i)}(e,o,n,t,a,i)},er=function(r,e){void 0===e&&(e="\n\n"),!r||r.type!==c&&r.type!==u||(r.raws.before="".concat(e).concat(r.raws.before?r.raws.before.replace(/\n/g,""):""))},or=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];r.forEach((function(r){var e=r.prev();e&&e.type!==s&&er(r),r.walk((function(r){if(r.type===l){var e=r;e.raws&&e.raws.value&&h.test(e.raws.value.raw)&&(delete e.raws.value,e.value=e.value.trim())}}))}))},nr=function(r){X(r)?r.walkRules((function(r){nr(r),X(r)||r.remove()})):r.remove()},tr={animation:{overridden:null,overrides:["animation-direction","animation-duration","animation-delay","animation-name","animation-fill-mode","animation-iteration-count","animation-play-state","animation-timing-function"]},background:{overridden:null,overrides:["background-attachment","background-clip","background-color","background-image","background-repeat","background-size"]},"background-position":{overridden:"background",overrides:["background-position-x","background-position-y"]},border:{overridden:null,overrides:[]},"border-bottom":{overridden:"border",overrides:["border-bottom-color","border-bottom-style","border-bottom-width"]},"border-left":{overridden:"border",overrides:["border-left-color","border-left-style","border-left-width"]},"border-right":{overridden:"border",overrides:["border-right-color","border-right-style","border-right-width"]},"border-top":{overridden:"border",overrides:["border-top-color","border-top-style","border-top-width"]},"border-color":{overridden:"border",overrides:["border-bottom-color","border-left-color","border-right-color","border-top-color"]},"border-style":{overridden:"border",overrides:["border-bottom-style","border-left-style","border-right-style","border-top-style"]},"border-width":{overridden:"border",overrides:["border-bottom-width","border-left-width","border-right-width","border-top-width"]},"border-radius":{overridden:null,overrides:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"]},margin:{overridden:null,overrides:["margin-bottom","margin-left","margin-top","margin-right"]},padding:{overridden:null,overrides:["padding-bottom","padding-left","padding-top","padding-right"]},transition:{overridden:null,overrides:["transition-delay","transition-duration","transition-property","transition-timing-function"]}},ir={"border-left":{overridden:"border",overrides:["border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width"]},"border-right":{overridden:"border",overrides:["border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width"]},"border-left-color":{overridden:"border",overrides:["border-inline-end-color","border-inline-start-color"]},"border-right-color":{overridden:"border",overrides:["border-inline-end-color","border-inline-start-color"]},"border-left-style":{overridden:"border",overrides:["border-inline-end-style","border-inline-start-style"]},"border-right-style":{overridden:"border",overrides:["border-inline-end-style","border-inline-start-style"]},"border-left-width":{overridden:"border",overrides:["border-inline-end-width","border-inline-start-width"]},"border-right-width":{overridden:"border",overrides:["border-inline-end-width","border-inline-start-width"]},"border-radius":{overridden:null,overrides:["border-start-start-radius","border-start-end-radius","border-end-start-radius","border-end-end-radius"]},"border-bottom-left-radius":{overridden:"border-radius",overrides:["border-end-start-radius","border-end-end-radius"]},"border-bottom-right-radius":{overridden:"border-radius",overrides:["border-end-start-radius","border-end-end-radius"]},"border-top-left-radius":{overridden:"border-radius",overrides:["border-start-start-radius","border-start-end-radius"]},"border-top-right-radius":{overridden:"border-radius",overrides:["border-start-start-radius","border-start-end-radius"]},left:{overridden:null,overrides:["inset-inline","inset-inline-end","inset-inline-start"]},right:{overridden:null,overrides:["inset-inline","inset-inline-end","inset-inline-start"]},margin:{overridden:null,overrides:["margin-inline","margin-inline-end","margin-inline-start","margin-block","margin-block-end","margin-block-start"]},"margin-left":{overridden:null,overrides:["margin-inline","margin-inline-end","margin-inline-start"]},"margin-right":{overridden:null,overrides:["margin-inline","margin-inline-end","margin-inline-start"]},padding:{overridden:null,overrides:["padding-inline","padding-inline-end","padding-inline-start","padding-block","padding-block-end","padding-block-start"]},"padding-left":{overridden:null,overrides:["padding-inline","padding-inline-end","padding-inline-start"]},"padding-right":{overridden:null,overrides:["padding-inline","padding-inline-end","padding-inline-start"]}},dr=["box-shadow","clear","cursor","direction","float","left","right","text-align","text-align-last","text-shadow","transform","transform-origin"],ar={0:["border-bottom-right-radius","border-bottom-left-radius","border-end-end-radius","border-end-start-radius","border-start-end-radius","border-start-start-radius","border-top-left-radius","border-top-right-radius","margin-block-end","margin-block-start","margin-top","margin-right","margin-bottom","margin-left","margin-inline-end","margin-inline-start","padding-block-end","padding-block-start","padding-top","padding-right","padding-bottom","padding-left","padding-inline-end","padding-inline-start","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left","scroll-margin-inline-end","scroll-margin-inline-start"],auto:["top","right","bottom","left","grid-column-end","grid-column-start","grid-row-end","grid-row-start","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left","scroll-padding-inline-end","scroll-padding-inline-start"],currentcolor:["border-block-start-color","border-block-end-color","border-top-color","border-right-color","border-bottom-color","border-left-color","border-inline-start-color","border-inline-end-color"],medium:["border-block-start-width","border-block-end-width","border-top-width","border-right-width","border-bottom-width","border-left-width","border-inline-start-width","border-inline-end-width"],none:["border-block-start","border-block-end","border-top","border-right","border-bottom","border-left","border-top-style","border-right-style","border-bottom-style","border-left-style","border-block-start-style","border-block-end-style","border-inline-start","border-inline-end","border-inline-start-style","border-inline-end-style"]},sr={},lr={},cr={},ur=function(r){return Array.from(new Set(r))},fr=function(r){var e=tr[r].overridden;return e?[e].concat(fr(e)):[]};Object.keys(tr).forEach((function(r){var e=fr(r);sr[r]=e,tr[r].overrides.forEach((function(o){sr[o]=[r].concat(e)}))})),Object.keys(ir).forEach((function(r){var e=function(r){var e,o=null===(e=tr[r])||void 0===e?void 0:e.overridden,n=ir[r].overridden,t=o?[o].concat(fr(o)):[],d=n?[n].concat(fr(n)):[];return ur(i(i([],t,!0),d,!0))}(r);sr[r]=sr[r]?ur(i(i([],sr[r],!0),e,!0)):e,ir[r].overrides.forEach((function(o){sr[o]=sr[o]?ur(i(i([],sr[o],!0),[r].concat(e),!0)):ur([r].concat(e))}))})),Object.assign(lr,sr),dr.forEach((function(r){lr[r]=[]})),Object.keys(ar).forEach((function(r){ar[r].forEach((function(e){cr[e]=r}))}));var pr=function(r,e){var o=r.clone(),n=r.prev();if(n&&n.type===s){var t=n.clone();e.append(t),n.remove()}e.append(o)},vr=function(r){var e=!!r.raws&&!!r.raws.value&&r.raws.value.raw;return!(!e||!y.test(e))},mr=function(r,e){return e.some((function(e){return sr[e]&&sr[e].includes(r)}))},br=function(r,e,o){return!!o[e.prop]&&Object.entries(o[e.prop].indexes).some((function(n){return n[1].value===e.value.trim()&&!function(r,e,o){var n=r.index(e),t=Object.keys(o[e.prop].indexes).map(Number);return 1!==t.length&&t.some((function(r){return r>n}))}(r,n[1].decl,o)}))},gr=function(n,t,i,a,s){var c=C.options,u=c.mode,f=c.source,p=c.safeBothPrefix,v=c.processUrls,m=c.processRuleNames,h=c.processEnv,y=c.useCalc,R=c.stringMap,k=c.greedy,w=c.aliases,E=c.plugins,P=[],A=n.clone().removeAll(),O=A.clone(),S=A.clone(),T=A.clone(),N=Array.prototype.reduce.call(n.nodes,(function(r,e){if(e.type===l){var o=e,t=n.index(o);r[o.prop]=r[o.prop]||{ignore:!1,indexes:{}},r[o.prop].indexes[t]={decl:o,value:o.value.trim(),ignore:!1}}return r}),{}),j=[],M={},L=!1;_(n,[l],(function(e,t){var a,s;if(er(e.next()),e.remove(),t.directive===d.RAW&&t.option){var l=H(M,i),c=r.parse(t.option,{from:null===(s=null===(a=n.source)||void 0===a?void 0:a.input)||void 0===s?void 0:s.from});u===o.combined&&!l||l&&(u===o.combined&&l===f||u===o.override&&l!==f)?O.append(c.nodes):A.append(c.nodes)}D(t,M)||(M[t.directive]=t)}),(function(t){var a,l;if(!z(M,d.IGNORE)){var c=z(M,d.URLS),m=t,U="".concat(m.toString(),";"),I=e.process(U,{processUrls:v||c||s,processEnv:h,useCalc:y,stringMap:R,greedy:k,aliases:w},E),F=r.parse(I,{from:null===(l=null===(a=n.source)||void 0===a?void 0:a.input)||void 0===l?void 0:l.from}).first;F.source=m.source,F.raws=m.raws;var G=m.prop,$=J(G),B=m.value.trim(),W=Object.keys(N[G].indexes).map(Number),K=$===b||$===g||w[$]===b||w[$]===g,D=F.prop.trim(),_=F.value.trim(),q=w[$]?sr[w[$]]:sr[$],Q=j.includes($)||j.includes(w[$])||!!q&&q.some((function(r){return j.indexOf(r)>=0})),V=w[$]?mr(w[$],j):mr($,j),X=!!p&&(w[$]?!!lr[w[$]]:!!lr[$]),Y=H(M,i),Z=!Y||Y===f||u===o.diff;if((G!==D||B!==_||Q||V||X||K)&&!(N[m.prop].ignore&&!X||function(r,e,o,n){var t=r.index(e),i=n[e.prop],d=Object.keys(i.indexes).map(Number).sort();if(1===d.length)return!1;var a=d.filter((function(r){return r>t}));if(a.length){if(x.test(e.prop)){if(n[o.prop]){var s=n[o.prop],l=Object.keys(s.indexes).map(Number).sort().slice(-1)[0],c=a.slice(-1)[0];return i.indexes[c].value===s.indexes[l].value&&(i.ignore=!0,s.ignore=!0),!0}return!1}return!0}return!1}(n,m,F,N)))if(K)if(G!==D||B!==_||0!==C.keyframes.length&&C.keyframesRegExp.test(B)){var rr=m.value.replace(C.keyframesRegExp,(function(r,e,o,n){return e+C.keyframesStringMap[o].name+n})),er=m.value.replace(C.keyframesRegExp,(function(r,e,o,n){return e+C.keyframesStringMap[o].nameFlipped+n})),or=m.clone();if(u===o.combined)(nr=m.clone()).value=rr,or.value=er,Z?(A.append(nr),O.append(or)):(A.append(or),O.append(nr)),P.push(m);else m.value=rr,or.value=er,Z?A.append(or):O.append(or),p&&u!==o.diff&&(pr(m,T),P.push(m))}else p&&!vr(m)&&(u===o.diff?pr(m,A):pr(m,T),P.push(m));else{if(G===D&&B===_)return void((Q||X||V)&&!vr(m)&&(u===o.diff?pr(m,A):pr(m,Q||V?S:T),P.push(m)));if(br(n,F,N))return L=!0,void(X&&!vr(m)&&(u===o.diff?pr(m,A):pr(m,T),P.push(m)));if(u===o.combined)Z?(pr(m,A),O.append(F)):(pr(m,O),A.append(F)),P.push(m);else{var nr;if(x.test(m.prop)&&!N[F.prop]&&n.index(m)===W[0])(nr=m.clone()).value=cr[m.prop]||"unset",Z?A.append(nr):O.append(nr);X&&!vr(m)&&u!==o.diff&&(pr(m,T),P.push(m)),Z?A.append(F):O.append(F)}j.push($)}}})),P.length&&P.forEach((function(r){return r.remove()})),A.nodes.length||O.nodes.length||S.nodes.length||T.nodes.length?t?rr(n,A,O,S,T):Z(n,A,O,S,T):!m&&!a||L?u===o.diff&&C.rulesToRemove.push(n):C.unmodifiedRules.push({rule:n,hasParentRule:t})},hr=function(r){C.options.mode===o.diff&&C.rulesToRemove.push(r)},yr=function(e,t,i){void 0===t&&(t=void 0),void 0===i&&(i=!1);var a={},s=C.options,l=s.mode,u=s.source,f=s.ltrPrefix,p=s.rtlPrefix;_(e,[c],(function(t,i){var s,c;if(i.directive===d.RAW&&i.option){var v=H(a),m=r.parse(i.option,{from:null===(c=null===(s=e.source)||void 0===s?void 0:s.input)||void 0===c?void 0:c.from});return l!==o.diff&&m.walkRules((function(r){V(r,!v&&u===n.ltr||v&&v===n.ltr?p:f)})),void t.replaceWith(m.nodes)}er(t.next()),t.remove(),D(i,a)||(a[i.directive]=i)}),(function(r){if(z(a,d.IGNORE))hr(r);else{var e=r,o=H(a,t);!function(r){return!!r.selectors.find((function(r){return C.rulesPrefixRegExp.test(r)}))}(e)?gr(e,i,o,z(a,d.RULES),z(a,d.URLS)):hr(e),yr(e,t,!0)}}))},Rr=function(r){var e={};_(r,[u,c],(function(r,o){D(o,e)||(e[o.directive]=o)}),(function(r){if(!z(e,d.IGNORE)&&r.type===u){var o=r;if(J(o.name)!==m){var n=H(e);yr(o,n),Rr(o)}}}))},xr=function(r){C.options.mode===o.diff&&C.keyframesToRemove.push(r)};function kr(t){return void 0===t&&(t={}),{postcssPlugin:"postcss-rtlcss",Once:function(i){G(t),function(o){var t=C.options,i=t.source,a=t.processUrls,s=t.useCalc,l=t.stringMap;if(t.processKeyFrames){var f={};_(o,[u,c],(function(r,e){D(e,f)||(f[e.directive]=e)}),(function(o){var t,c;if(z(f,d.IGNORE))xr(o);else if(o.type===u){var p=o;if(J(p.name)===m){var v=p.toString(),b=e.process(v,{processUrls:a,useCalc:s,stringMap:l});if(v!==b){var g=r.parse(b,{from:null===(c=null===(t=p.source)||void 0===t?void 0:t.input)||void 0===c?void 0:c.from}).first,h=p.params,y="".concat(h,"-").concat(n.ltr),R="".concat(h,"-").concat(n.rtl),x=H(f);p.params=!x&&i===n.ltr||x&&x===n.ltr?y:R,g.params=!x&&i===n.ltr||x&&x===n.ltr?R:y,C.keyframes.push({atRuleParams:h,atRule:p,atRuleFlipped:g})}else xr(p)}}})),$()}}(i),Rr(i),yr(i),function(){if(C.unmodifiedRules.length){var r=C.options.stringMap.reduce((function(r,e){var o="string"==typeof e.search?[e.search]:e.search,n="string"==typeof e.replace?[e.replace]:e.replace;return o.forEach((function(e,o){r[e]=n[o],r[n[o]]=e})),r}),{}),e=Object.keys(r).join("|"),n=C.options.greedy?new RegExp("(".concat(e,")"),"g"):new RegExp("\\b(".concat(e,")\\b"),"g"),t={},i=[];C.unmodifiedRules.forEach((function(r){var e=!1;r.rule.selectors.forEach((function(o){n.test(o)&&(t[o]=r.rule.clone(),e=!0),n.lastIndex=0})),e?i.push(r):C.options.mode===o.diff&&C.rulesToRemove.push(r.rule)})),i.forEach((function(e){for(var i=e.rule,d=e.hasParentRule,a=i.clone(),s=i.clone().removeAll(),l=void 0,c=0,u=i.selectors;c<u.length;c++){var f=u[c].replace(n,(function(e,o){return r[o]}));if(t[f]){l=t[f].clone();break}}l&&(l.selectors=a.selectors,C.options.mode===o.combined?d?rr(i.removeAll(),a,l,s,s):Z(i.removeAll(),a,l,s,s):d?rr(C.options.mode===o.override?i:i.removeAll(),l,s,s,s):Z(C.options.mode===o.override?i:i.removeAll(),l,s,s,s)),C.options.mode===o.diff&&C.rulesToRemove.push(i)}))}}(),C.rules.forEach((function(r){var e=r.rule,o=r.ruleLTR,n=r.ruleRTL,t=r.ruleBoth,i=r.ruleSafe;t.nodes.length&&e.after(t),n.nodes.length&&e.after(n),o.nodes.length&&e.after(o),i.nodes.length&&e.after(i),nr(e),or(e,o,n,t,i)})),C.keyframes.forEach((function(r){var e=r.atRule,o=r.atRuleFlipped;e.after(o),or(e,o)})),function(r){var e=C.options,n=C.rules,t=C.rulesToRemove,i=C.keyframes,d=C.keyframesToRemove,a=e.mode,l=e.processKeyFrames;a===o.diff&&(n.forEach((function(r){r.rule.remove()})),t.forEach((function(r){r.remove()})),i.forEach((function(r){r.atRule.remove()})),d.forEach((function(r){r.remove()}))),r.walk((function(e){if(a===o.diff&&(e.type===s?e.remove():e.type!==u||l||J(e.name)!==m||e.remove()),(e.type===c||e.type===u)&&e.nodes)if(X(e)){var n=e.prev();n?n.type!==s&&er(e):er(e,e.parent===r?"":"\n")}else a===o.diff&&e.remove()}))}(i)}}}kr.postcss=!0;export{kr as default};
